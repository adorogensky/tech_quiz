#!/usr/bin/python
import sqlite3
from datetime import datetime
conn = sqlite3.connect('tq.db')
conn.row_factory = sqlite3.Row
cursor = conn.cursor()

for row in cursor.execute("select * from question_answer"):
    print("Question: ", row["question"])
    answer = input("Answer: ")
    if (answer == row["answer"]):
        print("Correct!")
        params = [row['id'], answer, 1, datetime.now()]
        conn.execute(
                "insert into answer_stats (question_id, answer, correct_answer, timestamp) values (?,?,?,?)", params
        )
        conn.commit()
    else:
        print("Incorrect")
        params = [row['id'], answer, 0, datetime.now()]
        conn.execute(
                "insert into answer_stats (question_id, answer, correct_answer, timestamp) values (?,?,?,?)", params
        )
        conn.commit()
conn.close()
